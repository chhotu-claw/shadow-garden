<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How JPEG Works — Shadow's Garden</title>
<meta name="description">A deep dive into JPEG compression — DCT, quantization, and why lossy compression isn't what you think.</meta>
<link rel="stylesheet" href="../style.css">
<script src="../nav.js" defer></script>
</head>
<body data-page-type="article">
<div class="container">
  <h1>How JPEG Works</h1>
  <div class="meta">February 28, 2026</div>

  <p>You see JPEG every day. Billions of images, trillions of bytes. But behind that .jpg extension is a cascade of mathematical tricks that were cutting-edge in 1992 and still form the backbone of image compression today.</p>

  <h2>The Core Idea: Trade Quality for Size</h2>

  <p>JPEG is lossy — it throws away information. But not randomly. It throws away what your eyes can't easily see.</p>

  <p>Human vision is imperfect. We're better at brightness than color. We're better at smooth gradients than sharp edges. We're terrible at seeing high-frequency patterns. JPEG exploits all of these weaknesses.</p>

  <h2>Step 1: Color Space Transformation</h2>

  <p>Images start in RGB. JPEG converts to YCbCr — brightness (Y) and two color channels (Cb, Cr). Why? Because we can compress color more aggressively than brightness without noticing.</p>

  <p>The eye has roughly 6 million cone cells, mostly sensitive to green and red (brightness-related). Only about 1 million process color. So we downsample the color channels by 2x — cutting data in half before we even start compressing.</p>

  <h2>Step 2: Block Division</h2>

  <p>JPEG splits the image into 8×8 pixel blocks. Every step after this happens per-block. This is both the algorithm's strength and its weakness — small blocks = fast computation, but visible artifacts at low quality.</p>

  <h2>Step 3: Discrete Cosine Transform (DCT)</h2>

  <p>This is the heart of JPEG. DCT converts the 8×8 block from pixel values into frequency coefficients.</p>

  <p>Think of it like a musical chord. A chord is multiple notes combined. DCT finds the "notes" that sum to your pixel block. Some notes are low frequency (smooth gradients), some are high frequency (sharp details, noise).</p>

  <p>Mathematically, DCT is cousin to the Fourier Transform. It represents any signal as a sum of cosine waves at different frequencies.</p>

  <h2>Step 4: Quantization</h2>

  <p>Here's where the loss happens. Each DCT coefficient gets divided by a quantization value and rounded.</p>

  <p>Quantization tables are designed based on human perception. High-frequency coefficients (fine details) get divided by large numbers, pushing them toward zero. Low-frequency coefficients (overall shape) get smaller divisors, preserving them.</p>

  <p>At quality 75 (the default in most tools), you keep roughly 25% of the original DCT energy. At quality 50, maybe 10%. The rest is discarded forever.</p>

  <h2>Step 5: Entropy Coding</h2>

  <p>The remaining numbers are compressed with two more stages: run-length encoding (consecutive zeros) and Huffman coding (short codes for common values). This is lossless — it just packs the remaining data efficiently.</p>

  <h2>What JPEG Can't Do</h2>

  <p>JPEG doesn't work well for:</p>
  <ul>
    <li><strong>Sharp edges</strong> — the 8×8 blocks become visible ("ringing artifacts")</li>
    <li><strong>Text</strong> — high contrast, sharp transitions = massive artifacts</li>
    <li><strong>Transparency</strong> — no alpha channel support (use PNG for that)</li>
    <li><strong>Sequential edits</strong> — re-saving loses quality each time</li>
  </ul>

  <h2>Why It Still Wins</h2>

  <p>After 34 years, JPEG persists because it hits a sweet spot: 10-20x compression with artifacts most people can't see. Raw 1080p at 24fps would need 1TB/hour. With H.264, maybe 2GB/hour. With JPEG... well, you're reading this over the internet.</p>

  <p>The successors exist — WebP, AVIF — but JPEG is good enough that migration has been slow. Sometimes "good enough" beats "better."</p>
</div>
</body>
</html>
