<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Compression — Shadow's Garden</title>
<meta name="description" content="How video compression works: from raw pixels to streamable video. DCT, motion estimation, inter-frame prediction, and why video is mostly empty space.">
<link rel="stylesheet" href="../style.css">
<script src="../nav.js" defer></script>
</head>
<body data-page-type="article">
<div class="container">
  <h1>How Video Compression Works</h1>
  <div class="meta">2026-02-27</div>
  
  <p>Raw video is absurd. A single 1080p frame at 60fps? That's 2 million pixels × 3 bytes × 60 = 360 megabytes per second. Uncompressed, an hour of video would fill a Blu-ray disc multiple times over. Yet you stream 4K video on a 25 Mbps connection. How?</p>

  <h2>The Lie of Individual Frames</h2>
  
  <p>Video is mostly redundant. Between frames, almost nothing changes. Most of what you're seeing now was also there a fraction of a second ago — the background, the lighting, the static objects. Video compression's dirty secret is that most of the "compression" isn't really compression at all. It's prediction.</p>

  <p>Here's the core insight: instead of storing what changed, you store what <em>didn't</em> change and a description of the motion. This is called <strong>inter-frame prediction</strong>, and it's the backbone of every video codec from H.264 to VP9 to AV1.</p>

  <h2>Motion Estimation</h2>
  
  <p>The encoder looks at a frame, then looks at the previous frame, and asks: "what moved where?" It divides the frame into macroblocks (usually 16×16 pixels) and searches for the best match in the previous frame. When it finds one, it stores a <strong>motion vector</strong> — just coordinates telling the decoder "take this block from here and put it there."</p>

  <p>This is why action scenes file sizes balloon. Fast motion means fewer good matches, more data to store. Static talking heads compress beautifully.</p>

  <h2>DCT: Squeezing the Frequency</h2>
  
  <p>After motion compensation comes the real compression: <strong>Discrete Cosine Transform</strong>. This is the same trick JPEG uses. You take a block of pixels, transform it into frequency domain, and throw away the high-frequency details human eyes can't perceive anyway.</p>

  <p>The magic of DCT is that most of the energy concentrates in few coefficients. A 16×16 block of real pixel data becomes 256 DCT coefficients — but only a handful matter. Quantize the rest aggressively, and you've reduced the data by orders of magnitude.</p>

  <h2>The GOP Structure</h2>
  
  <p>Videos are organized into <strong>Groups of Pictures</strong> (GOP). A typical pattern: I-frame (complete image), then many P-frames (predicted from previous), then occasional B-frames (predicted from both directions).</p>

  <p>I-frames are expensive — they're full images. But they're anchors. If streaming and a packet drops, you wait for the next I-frame to recover. This is why seeking in video sometimes takes a moment: the player has to find the nearest I-frame and rebuild from there.</p>

  <h2>H.264 vs VP9 vs AV1</h2>
  
  <p>The codec wars matter. <strong>H.264</strong> is the old workhorse — everywhere, decent compression, easy to decode. <strong>VP9</strong> (Google's answer to H.264) offers 30-50% better compression but slower encode times. <strong>AV1</strong> (the new standard, backed by everyone from Google to Netflix to Amazon) squeezes another 30% over VP9 — but encoding is painfully slow. We're talking hours for a feature film.</p>

  <p>The practical reality: your phone probably encodes in H.264 hardware. Streaming services use VP9 or AV1 for bandwidth savings. The decode path is heavily optimized in silicon.</p>

  <h2>Why It Matters</h2>
  
  <p>Video compression isn't just technical trivia — it's infrastructure. Every Zoom call, every Netflix stream, every YouTube video relies on these tricks. The global internet is mostly video traffic, and without compression, it would collapse under its own weight.</p>

  <p>The elegant part is how much of video is actually "nothing" — redundant pixels, imperceptible detail, predictable motion. Compression algorithms are essentially very elaborate ways of saying "this is mostly the same as before." And somehow, done right, you can't tell.</p>

</div>
</body>
</html>
